(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"REQUEST_SHOWS",function(){return E}),n.d(r,"RECEIVE_SHOWS",function(){return h}),n.d(r,"REQUEST_POSTER_INFO",function(){return g}),n.d(r,"RECEIVE_POSTER_INFO",function(){return b}),n.d(r,"FAIL_POSTER_INFO",function(){return O}),n.d(r,"RECEIVE_PAGINATION_INFO",function(){return v}),n.d(r,"SET_PAGE",function(){return I}),n.d(r,"CHANGE_ITEMS_PER_PAGE",function(){return P}),n.d(r,"SHOW_IMG",function(){return N}),n.d(r,"fetchShows",function(){return C}),n.d(r,"requestShows",function(){return w}),n.d(r,"receiveShows",function(){return _}),n.d(r,"receivePaginationInfo",function(){return j}),n.d(r,"fetchPosterInfo",function(){return S}),n.d(r,"requestPosterInfo",function(){return y}),n.d(r,"receivePosterInfo",function(){return T}),n.d(r,"failPosterInfo",function(){return R}),n.d(r,"revealImg",function(){return A}),n.d(r,"setPage",function(){return k}),n.d(r,"changeItemsPerPage",function(){return U});var a=n(0),o=n.n(a),u=n(7),c=n(1),i=n(5),l=n(2),s=n(16),p=n.n(s),d="1098aa9283a45930885916b98e046d43cd7301e4de4198c5e624aa39b5cd6972",m="313966685b1712ca5f9c4c15427da38d",f="4a2226e35da3b653ed9d980ae3efb5f8",E="REQUEST_SHOWS",h="RECEIVE_SHOWS",g="REQUEST_POSTER_INFO",b="RECEIVE_POSTER_INFO",O="FAIL_POSTER_INFO",v="RECEIVE_PAGINATION_INFO",I="SET_PAGE",P="CHANGE_ITEMS_PER_PAGE",N="SHOW_IMG";function C(e,t){return function(n){n(w());var r="https://api.trakt.tv/shows/popular?page="+e+"&limit="+t,a={headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":d}};return p()(r,a).then(function(e){var t=parseInt(e.headers.get("X-Pagination-Page-Count")),r=parseInt(e.headers.get("X-Pagination-Item-Count"));return n(j(t,r)),e.json()}).then(function(e){n(_(e)),e.map(function(e){return n(S(e.ids.tvdb))})})}}function w(){return{type:E}}function _(e){return{type:h,shows:e}}function j(e,t){return{type:v,pageCount:e,itemCount:t}}function S(e){return function(t){t(y(e));var n="https://webservice.fanart.tv/v3/tv/"+e+"?api_key="+f+"&client_key="+m;return p()(n).then(function(n){if(n.ok)return n.json();t(R(e))}).then(function(n){return t(T(n,e))})}}function y(e){return{type:g,posterId:e}}function T(e,t){return{type:b,info:e,posterId:t}}function R(e){return{type:O,posterId:e}}function A(e){return{type:N,showId:e}}function k(e){return{type:I,pageNumber:e}}function U(e){return{type:P,items:e}}var F=Object(c.combineReducers)({shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(l.a)({},e,{infoNeedToBeChanged:!1,showsDownloaded:!1});case h:console.log(t.shows);var n=1;return Object(l.a)({},e,{info:t.shows.map(function(e){return{id:n++,title:e.title,year:e.year,posterId:e.ids.tvdb,imgLoaded:!1}}),showsDownloaded:!0});case v:return Object(l.a)({},e,{pageCount:t.pageCount,itemCount:t.itemCount});case b:return Object(l.a)({},e,{info:e.info.map(function(e){return e.posterId===t.posterId?Object(l.a)({},e,{posterUrl:(n=t.info,n.tvposter?n.tvposter instanceof Array?n.tvposter[0].url:n.tvposter.url:n.seasonposter?n.seasonposter instanceof Array?n.seasonposter[0].url:n.seasonposter.url:"no posters")}):e;var n})});case O:return Object(l.a)({},e,{info:e.info.map(function(e){return e.posterId===t.posterId?Object(l.a)({},e,{posterUrl:"no info"}):e})});case N:return Object(l.a)({},e,{info:e.info.map(function(e){return e.id===t.showId?Object(l.a)({},e,{imgLoaded:!0}):e})});case I:return Object(l.a)({},e,{pageNumber:t.pageNumber<1||t.pageNumber>e.pageCount?e.pageNumber:t.pageNumber,infoNeedToBeChanged:!0});case P:return Object(l.a)({},e,{itemsPerPage:t.items,pageNumber:1,infoNeedToBeChanged:!0})}return e}}),G=(n(31),n(8)),H=n(9),V=n(11),L=n(10),W=n(4),B=n(12),D=(n(32),function(){return o.a.createElement("div",{className:"spinner"})}),M=function(e){function t(){return Object(G.a)(this,t),Object(V.a)(this,Object(L.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(H.a)(t,[{key:"render",value:function(){var e=this,t=this.props.shows,n=t&&t.info&&t.info.map(function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",null,t.title),o.a.createElement("td",null,t.year?t.year:"\xaf\\_(\u30c4)_/\xaf"),o.a.createElement("td",null,t.posterUrl?"no posters"===t.posterUrl?o.a.createElement("p",null,"Only logo :("):"no info"===t.posterUrl?o.a.createElement("p",null,"No posters ;("):o.a.createElement("a",{href:t.posterUrl,rel:"noopener noreferrer",target:"_blank"},t.imgLoaded?"":o.a.createElement(D,null),o.a.createElement("img",{src:t.posterUrl,className:"poster",alt:t.title+" poster",onLoad:function(){return e.props.revealImg(t.id)},hidden:!t.imgLoaded})):o.a.createElement(D,null)))});return o.a.createElement("div",{className:"Table"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"\u2116"),o.a.createElement("td",null,"Title"),o.a.createElement("td",null,"Year"),o.a.createElement("td",null,"Poster"))),o.a.createElement("tbody",null,n)))}}]),t}(o.a.Component),Q=Object(i.b)(function(e){return{shows:e.shows}},function(e){return Object(c.bindActionCreators)(r,e)})(M),q=function(e){var t=e.currPage,n=e.totalPages,r=t<=3?"":o.a.createElement("li",null,o.a.createElement("a",{className:"prev",onClick:function(){return e.setPage(1)}},"\xab")),a=t>=n-2?"":o.a.createElement("li",null,o.a.createElement("a",{className:"next",onClick:function(){return e.setPage(n)}},"\xbb")),u=function(r,a){return a<r||a>n?"":o.a.createElement("li",null,o.a.createElement("a",{className:t===a?"active":"",onClick:function(){return e.setPage(a)}},a))};return t-2<1?o.a.createElement("ul",{className:"pagination"},r,u(1,1),u(2,2),u(3,3),u(4,4),u(5,5),a):t+2>n?o.a.createElement("ul",{className:"pagination"},r,u(1,n-4),u(2,n-3),u(3,n-2),u(4,n-1),u(5,n),a):o.a.createElement("ul",{className:"pagination"},r,u(1,t-2),u(2,t-1),u(3,t),u(4,t+1),u(5,t+2),a)},x=function(){return o.a.createElement("div",{className:"loader"})},J=function(e){function t(e){var n;return Object(G.a)(this,t),(n=Object(V.a)(this,Object(L.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(W.a)(n)),n}return Object(B.a)(t,e),Object(H.a)(t,[{key:"handleChange",value:function(e){this.props.changeItemsPerPage(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props.shows,n=t.pageCount&&t.itemCount,r=o.a.createElement("h1",null,"TV SERIES POSTERS");if(t.infoNeedToBeChanged)return this.props.fetchShows(t.pageNumber,t.itemsPerPage),o.a.createElement("div",{className:"App"},o.a.createElement(x,null));if(!t.showsDownloaded)return o.a.createElement("div",{className:"App"},o.a.createElement(x,null));if(!n)return o.a.createElement("div",{className:"App"},r,o.a.createElement(Q,null));var a=o.a.createElement("div",null,o.a.createElement("p",null,"TV-shows displayed:",o.a.createElement("select",{value:t.itemsPerPage,onChange:this.handleChange},o.a.createElement("option",{value:5},"5"),o.a.createElement("option",{value:10},"10"),o.a.createElement("option",{value:25},"25"),o.a.createElement("option",{value:50},"50")),". Page ",t.pageNumber," of ",t.pageCount),o.a.createElement("p",null,"Shows in total: ",t.itemCount));return o.a.createElement("div",{className:"App"},r,o.a.createElement(q,{setPage:function(t){return e.props.setPage(t)},currPage:t.pageNumber,totalPages:t.pageCount}),o.a.createElement(Q,null),a)}}]),t}(o.a.Component),X=Object(i.b)(function(e){return{shows:e.shows}},function(e){return Object(c.bindActionCreators)(r,e)})(J),Y={shows:{info:[],pageCount:null,itemCount:null,pageNumber:1,itemsPerPage:10,infoNeedToBeChanged:!0,showsDownloaded:!1}},z=n(20),K=n(21),Z=Object(c.createStore)(F,Y,Object(z.composeWithDevTools)(Object(c.applyMiddleware)(K.a)));Object(u.render)(o.a.createElement(i.a,{store:Z},o.a.createElement(X,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.294bb7f7.chunk.js.map