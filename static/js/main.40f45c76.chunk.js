(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"REQUEST_SHOWS",function(){return E}),n.d(a,"RECEIVE_SHOWS",function(){return g}),n.d(a,"REQUEST_POSTER_INFO",function(){return h}),n.d(a,"RECEIVE_POSTER_INFO",function(){return b}),n.d(a,"FAIL_POSTER_INFO",function(){return O}),n.d(a,"RECEIVE_PAGINATION_INFO",function(){return v}),n.d(a,"SET_PAGE",function(){return P}),n.d(a,"CHANGE_ITEMS_PER_PAGE",function(){return I}),n.d(a,"SHOW_IMG",function(){return N}),n.d(a,"fetchShows",function(){return C}),n.d(a,"receivePaginationInfo",function(){return w}),n.d(a,"fetchPosterInfo",function(){return _}),n.d(a,"requestPosterInfo",function(){return j}),n.d(a,"receivePosterInfo",function(){return S}),n.d(a,"failPosterInfo",function(){return y}),n.d(a,"revealImg",function(){return T}),n.d(a,"setPage",function(){return R}),n.d(a,"changeItemsPerPage",function(){return A});var r=n(0),o=n.n(r),u=n(7),c=n(1),l=n(5),i=n(2),s=n(16),p=n.n(s),d="1098aa9283a45930885916b98e046d43cd7301e4de4198c5e624aa39b5cd6972",m="313966685b1712ca5f9c4c15427da38d",f="4a2226e35da3b653ed9d980ae3efb5f8",E="REQUEST_SHOWS",g="RECEIVE_SHOWS",h="REQUEST_POSTER_INFO",b="RECEIVE_POSTER_INFO",O="FAIL_POSTER_INFO",v="RECEIVE_PAGINATION_INFO",P="SET_PAGE",I="CHANGE_ITEMS_PER_PAGE",N="SHOW_IMG";function C(e,t){return function(n){n({type:E});var a="https://api.trakt.tv/shows/popular?page="+e+"&limit="+t,r={headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":d}};return p()(a,r).then(function(e){var t=parseInt(e.headers.get("X-Pagination-Page-Count")),a=parseInt(e.headers.get("X-Pagination-Item-Count"));return n(w(t,a)),e.json()}).then(function(e){n({type:g,shows:e}),e.map(function(e){return n(_(e.ids.tvdb))})})}}function w(e,t){return{type:v,pageCount:e,itemCount:t}}function _(e){return function(t){t(j(e));var n="https://webservice.fanart.tv/v3/tv/"+e+"?api_key="+f+"&client_key="+m;return p()(n).then(function(n){if(n.ok)return n.json();t(y(e))}).then(function(n){return t(S(n,e))})}}function j(e){return{type:h,posterId:e}}function S(e,t){return{type:b,info:e,posterId:t}}function y(e){return{type:O,posterId:e}}function T(e){return{type:N,showId:e}}function R(e){return{type:P,pageNumber:e}}function A(e){return{type:I,items:e}}var k=Object(c.combineReducers)({shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(i.a)({},e,{infoNeedToBeChanged:!1,showsDownloaded:!1});case g:console.log(t.shows);var n=1+(e.pageNumber-1)*e.itemsPerPage;return Object(i.a)({},e,{info:t.shows.map(function(e){return{id:n++,title:e.title,year:e.year,posterId:e.ids.tvdb,imgLoaded:!1}}),showsDownloaded:!0});case v:return Object(i.a)({},e,{pageCount:t.pageCount,itemCount:t.itemCount});case b:return Object(i.a)({},e,{info:e.info.map(function(e){return e.posterId===t.posterId?Object(i.a)({},e,{posterUrl:(n=t.info,n.tvposter?n.tvposter instanceof Array?n.tvposter[0].url:n.tvposter.url:n.seasonposter?n.seasonposter instanceof Array?n.seasonposter[0].url:n.seasonposter.url:"no posters")}):e;var n})});case O:return Object(i.a)({},e,{info:e.info.map(function(e){return e.posterId===t.posterId?Object(i.a)({},e,{posterUrl:"no info"}):e})});case N:return Object(i.a)({},e,{info:e.info.map(function(e){return e.id===t.showId?Object(i.a)({},e,{imgLoaded:!0}):e})});case P:return Object(i.a)({},e,{pageNumber:t.pageNumber<1||t.pageNumber>e.pageCount?e.pageNumber:t.pageNumber,infoNeedToBeChanged:!0});case I:return Object(i.a)({},e,{itemsPerPage:t.items,pageNumber:1,infoNeedToBeChanged:!0})}return e}}),U=(n(31),n(8)),F=n(9),G=n(11),H=n(10),V=n(4),L=n(12),W=(n(32),function(){return o.a.createElement("div",{className:"spinner"})}),B=function(e){function t(){return Object(U.a)(this,t),Object(G.a)(this,Object(H.a)(t).apply(this,arguments))}return Object(L.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this,t=this.props.shows,n=t&&t.info&&t.info.map(function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",null,t.title),o.a.createElement("td",null,t.year?t.year:"\xaf\\_(\u30c4)_/\xaf"),o.a.createElement("td",null,t.posterUrl?"no posters"===t.posterUrl?o.a.createElement("p",null,"Only logo :("):"no info"===t.posterUrl?o.a.createElement("p",null,"No posters ;("):o.a.createElement("a",{href:t.posterUrl,rel:"noopener noreferrer",target:"_blank"},t.imgLoaded?"":o.a.createElement(W,null),o.a.createElement("img",{src:t.posterUrl,className:"poster",alt:t.title+" poster",onLoad:function(){return e.props.revealImg(t.id)},hidden:!t.imgLoaded})):o.a.createElement(W,null)))});return o.a.createElement("div",{className:"Table"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"\u2116"),o.a.createElement("td",null,"Title"),o.a.createElement("td",null,"Year"),o.a.createElement("td",null,"Poster"))),o.a.createElement("tbody",null,n)))}}]),t}(o.a.Component),D=Object(l.b)(function(e){return{shows:e.shows}},function(e){return Object(c.bindActionCreators)(a,e)})(B),M=function(e){var t=e.currPage,n=e.totalPages,a=t<=3?"":o.a.createElement("li",null,o.a.createElement("a",{className:"prev",onClick:function(){return e.setPage(1)}},"\xab")),r=t>=n-2?"":o.a.createElement("li",null,o.a.createElement("a",{className:"next",onClick:function(){return e.setPage(n)}},"\xbb")),u=function(a,r){return r<a||r>n?"":o.a.createElement("li",null,o.a.createElement("a",{className:t===r?"active":"",onClick:function(){return e.setPage(r)}},r))};return t-2<1?o.a.createElement("ul",{className:"pagination"},a,u(1,1),u(2,2),u(3,3),u(4,4),u(5,5),r):t+2>n?o.a.createElement("ul",{className:"pagination"},a,u(1,n-4),u(2,n-3),u(3,n-2),u(4,n-1),u(5,n),r):o.a.createElement("ul",{className:"pagination"},a,u(1,t-2),u(2,t-1),u(3,t),u(4,t+1),u(5,t+2),r)},Q=function(){return o.a.createElement("div",{className:"loader"})},x=function(e){function t(e){var n;return Object(U.a)(this,t),(n=Object(G.a)(this,Object(H.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(V.a)(n)),n}return Object(L.a)(t,e),Object(F.a)(t,[{key:"handleChange",value:function(e){this.props.changeItemsPerPage(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props.shows,n=t.pageCount&&t.itemCount,a=o.a.createElement("h1",null,"TV SERIES POSTERS");if(t.infoNeedToBeChanged)return this.props.fetchShows(t.pageNumber,t.itemsPerPage),o.a.createElement("div",{className:"App"},o.a.createElement(Q,null));if(!t.showsDownloaded)return o.a.createElement("div",{className:"App"},o.a.createElement(Q,null));if(!n)return o.a.createElement("div",{className:"App"},a,o.a.createElement(D,null));var r=o.a.createElement("div",null,o.a.createElement("p",null,"TV-shows displayed:",o.a.createElement("select",{value:t.itemsPerPage,onChange:this.handleChange},o.a.createElement("option",{value:5},"5"),o.a.createElement("option",{value:10},"10"),o.a.createElement("option",{value:25},"25"),o.a.createElement("option",{value:50},"50")),". Page ",t.pageNumber," of ",t.pageCount),o.a.createElement("p",null,"Shows in total: ",t.itemCount));return o.a.createElement("div",{className:"App"},a,o.a.createElement(M,{setPage:function(t){return e.props.setPage(t)},currPage:t.pageNumber,totalPages:t.pageCount}),o.a.createElement(D,null),r)}}]),t}(o.a.Component),J=Object(l.b)(function(e){return{shows:e.shows}},function(e){return Object(c.bindActionCreators)(a,e)})(x),X={shows:{info:[],pageCount:null,itemCount:null,pageNumber:1,itemsPerPage:10,infoNeedToBeChanged:!0,showsDownloaded:!1}},q=n(20),Y=n(21),z=Object(c.createStore)(k,X,Object(q.composeWithDevTools)(Object(c.applyMiddleware)(Y.a)));Object(u.render)(o.a.createElement(l.a,{store:z},o.a.createElement(J,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.40f45c76.chunk.js.map