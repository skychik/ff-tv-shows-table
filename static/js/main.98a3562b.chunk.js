(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(35)},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"REQUEST_SHOWS",function(){return m}),n.d(a,"RECEIVE_SHOWS",function(){return v}),n.d(a,"REQUEST_POSTER_INFO",function(){return E}),n.d(a,"RECEIVE_POSTER_INFO",function(){return g}),n.d(a,"FAIL_POSTER_INFO",function(){return b}),n.d(a,"RECEIVE_PAGINATION_INFO",function(){return w}),n.d(a,"SET_PAGE",function(){return O}),n.d(a,"CHANGE_ITEMS_PER_PAGE",function(){return S}),n.d(a,"SHOW_IMG",function(){return C}),n.d(a,"SET_SEARCH_VALUE",function(){return y}),n.d(a,"REQUEST_SEARCH_SHOWS",function(){return N}),n.d(a,"RECEIVE_SEARCH_SHOWS",function(){return P}),n.d(a,"FAIL_SEARCH_SHOWS",function(){return _}),n.d(a,"SET_SEARCH_MODE",function(){return I}),n.d(a,"SHOW_FULL_OVERVIEW",function(){return j}),n.d(a,"fetchShows",function(){return R}),n.d(a,"receivePaginationInfo",function(){return A}),n.d(a,"setSearchValue",function(){return T}),n.d(a,"searchShows",function(){return H}),n.d(a,"fetchPosterInfo",function(){return F}),n.d(a,"requestPosterInfo",function(){return V}),n.d(a,"receivePosterInfo",function(){return L}),n.d(a,"failPosterInfo",function(){return U}),n.d(a,"revealImg",function(){return W}),n.d(a,"setPage",function(){return x}),n.d(a,"changeItemsPerPage",function(){return G}),n.d(a,"setSearchMode",function(){return D}),n.d(a,"showFullOverview",function(){return B});var r=n(0),o=n.n(r),i=n(12),s=n(2),c=n(4),u=n(1),l=n(16),d=n(13),h=n.n(d),p="313966685b1712ca5f9c4c15427da38d",f="4a2226e35da3b653ed9d980ae3efb5f8",m="REQUEST_SHOWS",v="RECEIVE_SHOWS",E="REQUEST_POSTER_INFO",g="RECEIVE_POSTER_INFO",b="FAIL_POSTER_INFO",w="RECEIVE_PAGINATION_INFO",O="SET_PAGE",S="CHANGE_ITEMS_PER_PAGE",C="SHOW_IMG",y="SET_SEARCH_VALUE",N="REQUEST_SEARCH_SHOWS",P="RECEIVE_SEARCH_SHOWS",_="FAIL_SEARCH_SHOWS",I="SET_SEARCH_MODE",j="SHOW_FULL_OVERVIEW",k={headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":"1098aa9283a45930885916b98e046d43cd7301e4de4198c5e624aa39b5cd6972"}};function R(e,t){return function(n){n({type:m});var a="https://api.trakt.tv/shows/popular?extended=full&page="+e+"&limit="+t;return h()(a,k).then(function(e){if(e.ok)return n(A(e)),e.json();n(M())}).then(function(e){n({type:v,shows:e}),e.map(function(e){return n(F(e.ids.tvdb))})})}}function A(e){return{type:w,pageCount:parseInt(e.headers.get("X-Pagination-Page-Count")),itemCount:parseInt(e.headers.get("X-Pagination-Item-Count"))}}function T(e){return{type:y,value:e}}function H(e,t,n,a){return function(r){var o;switch(r({type:N}),console.log("value="+e),t){case"title":o="title";break;case"overview":o="overview";break;case"anyLangTitle":o="aliases";break;default:o=""}var i="https://api.trakt.tv/search/show?extended=full&field="+o+"&query="+e+"&page="+n+"&limit="+a;return h()(i,k).then(function(e){if(e.ok)return r(A(e)),e.json();r(M())}).then(function(e){r({type:P,shows:e}),e.map(function(e){return r(F(e.show.ids.tvdb))})})}}function M(){return{type:_}}function F(e){return function(t){t(V(e));var n="https://webservice.fanart.tv/v3/tv/"+e+"?api_key="+f+"&client_key="+p;return h()(n).then(function(n){if(n.ok)return n.json();t(U(e))}).then(function(n){return t(L(n,e))})}}function V(e){return{type:E,posterId:e}}function L(e,t){return{type:g,info:e,posterId:t}}function U(e){return{type:b,posterId:e}}function W(e){return{type:C,showId:e}}function x(e){return{type:O,pageNumber:e}}function G(e){return{type:S,items:e}}function D(e){return{type:I,mode:e}}function B(e){return{type:j,id:e}}var Q=200;var K=Object(s.combineReducers)({shows:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case m:case N:return Object(u.a)({},t,{infoNeedToBeChanged:!1,showsDownloaded:!1});case v:return e=1+(t.pageNumber-1)*t.itemsPerPage,Object(u.a)({},t,{info:n.shows&&n.shows.map(function(t){return{id:e++,title:t.title,overview:t.overview,fullOverviewShowed:!t.overview||t.overview.length<=Q,year:t.year,rating:t.rating,votes:t.votes,posterId:t.ids.tvdb,slug:t.ids.slug,imgLoaded:!1}}),showsDownloaded:!0});case P:return e=1+(t.pageNumber-1)*t.itemsPerPage,Object(u.a)({},t,{info:n.shows&&n.shows.map(function(t){return{id:e++,title:t.show.title,overview:t.show.overview,fullOverviewShowed:!t.show.overview||t.show.overview.length<=Q,year:t.show.year,rating:t.show.rating,votes:t.show.votes,posterId:t.show.ids.tvdb,slug:t.show.ids.slug,imgLoaded:!1}}),showsDownloaded:!0});case w:return Object(u.a)({},t,{pageCount:n.pageCount,itemCount:n.itemCount});case g:return Object(u.a)({},t,{info:t.info&&t.info.map(function(e){return e.posterId===n.posterId?Object(u.a)({},e,{posterUrl:(t=n.info,t.tvposter?t.tvposter instanceof Array?t.tvposter[0].url:t.tvposter.url:t.seasonposter?t.seasonposter instanceof Array?t.seasonposter[0].url:t.seasonposter.url:"no posters")}):e;var t})});case b:return Object(u.a)({},t,{info:t.info&&t.info.map(function(e){return e.posterId===n.posterId?Object(u.a)({},e,{posterUrl:"no info"}):e})});case C:return Object(u.a)({},t,{info:t.info&&t.info.map(function(e){return e.id===n.showId?Object(u.a)({},e,{imgLoaded:!0}):e})});case O:return Object(u.a)({},t,{pageNumber:n.pageNumber<1||n.pageNumber>t.pageCount?t.pageNumber:n.pageNumber,infoNeedToBeChanged:!0});case S:return Object(u.a)({},t,{itemsPerPage:n.items,pageNumber:1,infoNeedToBeChanged:!0});case j:return Object(u.a)({},t,{info:t.info.map(function(e){return e.id===n.id?Object(u.a)({},e,{fullOverviewShowed:!0}):e})})}return t},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(u.a)({},e,{value:l.escapeRegExp(t.value.trim())});case N:return Object(u.a)({},e,{previousValue:e.value,value:"",pending:!0,failed:!1});case P:return Object(u.a)({},e,{pending:!1});case _:return Object(u.a)({},e,{pending:!1,failed:!0})}return e},info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case N:return Object(u.a)({},e,{fetchedSearchMode:e.searchMode,mode:"search"});case m:return Object(u.a)({},e,{mode:"popular"});case I:return Object(u.a)({},e,{searchMode:t.mode})}return e}}),q=(n(33),n(6)),J=n(7),X=n(9),Y=n(8),z=n(3),Z=n(10),$=(n(34),function(){return o.a.createElement("div",{className:"spinner"})}),ee=function(e){function t(e){var n;return Object(q.a)(this,t),(n=Object(X.a)(this,Object(Y.a)(t).call(this,e))).handleSorting=n.handleSorting.bind(Object(z.a)(n)),n}return Object(Z.a)(t,e),Object(J.a)(t,[{key:"handleSorting",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.shows;console.log("!shows.info || shows.info === []"),console.log(!t.info||t.info.isEmpty);var n=t.info&&t.info.map(function(t){var n=o.a.createElement("div",null,o.a.createElement("div",{className:"overview"},t.overview?t.fullOverviewShowed?t.overview:t.overview.substr(0,Q)+"...":o.a.createElement("div",{style:{textAlign:"center"}},"\xaf\\_(\u30c4)_/\xaf")),o.a.createElement("div",null,t.fullOverviewShowed?"":o.a.createElement("button",{className:"showFullOverview-btn",onClick:function(){return e.props.showFullOverview(t.id)}},"Full overview"))),a=t.year?t.year:"\xaf\\_(\u30c4)_/\xaf",r=t.rating;return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",null,o.a.createElement("a",{href:"https://trakt.tv/shows/"+t.slug,target:"_blank",rel:"noopener noreferrer"},t.title)),o.a.createElement("td",null,n),o.a.createElement("td",null,a),o.a.createElement("td",null,Number(r.toFixed(2))),o.a.createElement("td",null,t.posterUrl?"no posters"===t.posterUrl?o.a.createElement("p",null,"Only logo :("):"no info"===t.posterUrl?o.a.createElement("p",null,"No posters ;("):o.a.createElement("a",{href:t.posterUrl,rel:"noopener noreferrer",target:"_blank"},t.imgLoaded?"":o.a.createElement($,null),o.a.createElement("img",{src:t.posterUrl,className:"poster",alt:t.title+" poster",onLoad:function(){return e.props.revealImg(t.id)},hidden:!t.imgLoaded})):o.a.createElement($,null)))});return o.a.createElement("div",{className:"Table"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"No-header",onClick:function(){return e.props.setSorting("No")}},"\u2116"),o.a.createElement("th",{className:"title-header"},"Title"),o.a.createElement("th",{className:"overview-header"},"Overview"),o.a.createElement("th",{className:"year-header"},"Year"),o.a.createElement("th",{className:"rating-header"},"Rating"),o.a.createElement("th",{className:"poster-header"},"Poster"))),o.a.createElement("tbody",null,n)))}}]),t}(o.a.Component),te=Object(c.b)(function(e){return{shows:e.shows,info:e.info}},function(e){return Object(s.bindActionCreators)(a,e)})(ee),ne=function(e){var t=e.currPage,n=e.totalPages,a=t<=3?"":o.a.createElement("li",null,o.a.createElement("button",{className:"prev",onClick:function(){return e.setPage(1)}},"\xab")),r=t>=n-2?"":o.a.createElement("li",null,o.a.createElement("button",{className:"next",onClick:function(){return e.setPage(n)}},"\xbb")),i=function(a,r){return r<a||r>n?"":o.a.createElement("li",null,o.a.createElement("button",{className:t===r?"active":"",onClick:t!==r?function(){return e.setPage(r)}:null},r))};return t-2<1?o.a.createElement("ul",{className:"pagination"},a,i(1,1),i(2,2),i(3,3),i(4,4),i(5,5),r):t+2>n?o.a.createElement("ul",{className:"pagination"},a,i(1,n-4),i(2,n-3),i(3,n-2),i(4,n-1),i(5,n),r):o.a.createElement("ul",{className:"pagination"},a,i(1,t-2),i(2,t-1),i(3,t),i(4,t+1),i(5,t+2),r)},ae=function(){return o.a.createElement("div",{className:"loader"})},re=function(e){return o.a.createElement("h1",null,e.text.toUpperCase())},oe=function(e){function t(e){var n;return Object(q.a)(this,t),(n=Object(X.a)(this,Object(Y.a)(t).call(this,e))).handleInputChange=n.handleInputChange.bind(Object(z.a)(n)),n.handleKeyPressed=n.handleKeyPressed.bind(Object(z.a)(n)),n.handleModeChange=n.handleModeChange.bind(Object(z.a)(n)),n.handleSearch=n.handleSearch.bind(Object(z.a)(n)),n}return Object(Z.a)(t,e),Object(J.a)(t,[{key:"handleInputChange",value:function(){this.props.setSearchValue(this.search.value)}},{key:"handleKeyPressed",value:function(e){"Enter"===e.key&&this.handleSearch()}},{key:"handleModeChange",value:function(e){this.props.setSearchMode(e.target.value)}},{key:"handleSearch",value:function(){var e=this.props,t=e.shows,n=e.search,a=e.info;""!==n.value&&(this.props.setPage(1),this.props.searchShows(n.value,a.searchMode,t.pageNumber,t.itemsPerPage))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.shows,t.search,t.info);return o.a.createElement("div",{className:"SearchForm"},o.a.createElement("input",{type:"search",placeholder:"Search...",ref:function(t){return e.search=t},onChange:this.handleInputChange,onKeyPress:this.handleKeyPressed}),o.a.createElement("select",{value:n.searchMode,onChange:this.handleModeChange},o.a.createElement("option",{value:"title"},"by title"),o.a.createElement("option",{value:"anyLangTitle"},"by title (any language)"),o.a.createElement("option",{value:"overview"},"by overview")),o.a.createElement("button",{onClick:this.handleSearch},"Find!"))}}]),t}(o.a.Component),ie=Object(c.b)(function(e){return{shows:e.shows,search:e.search,info:e.info}},function(e){return Object(s.bindActionCreators)(a,e)})(oe),se=function(e){function t(e){var n;return Object(q.a)(this,t),(n=Object(X.a)(this,Object(Y.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(z.a)(n)),n}return Object(Z.a)(t,e),Object(J.a)(t,[{key:"handleChange",value:function(e){this.props.changeItemsPerPage(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props,n=t.shows,a=t.info,r=t.search,i=n.pageCount&&n.itemCount,s=o.a.createElement("div",{className:"ExtraInfo"},o.a.createElement("p",null,"TV-shows displayed:",o.a.createElement("select",{value:n.itemsPerPage,onChange:this.handleChange},o.a.createElement("option",{value:5},"5"),o.a.createElement("option",{value:10},"10"),o.a.createElement("option",{value:25},"25"),o.a.createElement("option",{value:50},"50"))),o.a.createElement("p",null,"Page ",n.pageNumber," of ",n.pageCount,". Shows in total: ",n.itemCount)),c="search"!==a.mode?"":o.a.createElement("h2",null,"Search by ","anyLangTitle"===a.fetchedSearchMode?"title (any language)":a.fetchedSearchMode,' results for: "',r.previousValue,'".',o.a.createElement("button",{onClick:function(){return e.props.fetchShows(n.pageNumber,n.itemsPerPage)}},"Show all TV-shows"));if(n.infoNeedToBeChanged){switch(a.mode){case"popular":this.props.fetchShows(n.pageNumber,n.itemsPerPage);break;case"search":this.props.searchShows(r.value,a.searchMode,n.pageNumber,n.itemsPerPage)}return o.a.createElement("div",{className:"App"},o.a.createElement(ae,null))}return n.showsDownloaded?i?o.a.createElement("div",{className:"App"},o.a.createElement(re,{text:"tv show posters"}),o.a.createElement(ie,null),c,o.a.createElement(te,null),o.a.createElement(ne,{setPage:function(t){return e.props.setPage(t)},currPage:n.pageNumber,totalPages:n.pageCount}),s):o.a.createElement("div",{className:"App"},o.a.createElement(re,{text:"tv show posters"}),o.a.createElement(ie,null),c,o.a.createElement(te,null)):o.a.createElement("div",{className:"App"},o.a.createElement(ae,null))}}]),t}(o.a.Component),ce=Object(c.b)(function(e){return{shows:e.shows,search:e.search,info:e.info}},function(e){return Object(s.bindActionCreators)(a,e)})(se),ue={shows:{info:[],pageCount:null,itemCount:null,pageNumber:1,itemsPerPage:10,infoNeedToBeChanged:!0,showsDownloaded:!1},search:{value:"",pending:!1,failed:!1},info:{mode:"popular",searchMode:"title"}},le=n(21),de=n(22),he=Object(s.createStore)(K,ue,Object(le.composeWithDevTools)(Object(s.applyMiddleware)(de.a)));Object(i.render)(o.a.createElement(c.a,{store:he},o.a.createElement(ce,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.98a3562b.chunk.js.map