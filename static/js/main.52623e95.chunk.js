(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"REQUEST_SHOWS",function(){return E}),n.d(r,"RECEIVE_SHOWS",function(){return g}),n.d(r,"REQUEST_POSTER_INFO",function(){return h}),n.d(r,"RECEIVE_POSTER_INFO",function(){return b}),n.d(r,"FAIL_POSTER_INFO",function(){return P}),n.d(r,"RECEIVE_PAGINATION_INFO",function(){return O}),n.d(r,"SET_PAGE",function(){return v}),n.d(r,"CHANGE_ITEMS_PER_PAGE",function(){return C}),n.d(r,"fetchShows",function(){return N}),n.d(r,"requestShows",function(){return I}),n.d(r,"receiveShows",function(){return w}),n.d(r,"receivePaginationInfo",function(){return _}),n.d(r,"fetchPosterInfo",function(){return j}),n.d(r,"requestPosterInfo",function(){return y}),n.d(r,"receivePosterInfo",function(){return S}),n.d(r,"failPosterInfo",function(){return T}),n.d(r,"setPage",function(){return A}),n.d(r,"changeItemsPerPage",function(){return R});var a=n(0),o=n.n(a),u=n(7),c=n(1),l=n(5),s=n(2),i=n(16),p=n.n(i),f="1098aa9283a45930885916b98e046d43cd7301e4de4198c5e624aa39b5cd6972",d="313966685b1712ca5f9c4c15427da38d",m="4a2226e35da3b653ed9d980ae3efb5f8",E="REQUEST_SHOWS",g="RECEIVE_SHOWS",h="REQUEST_POSTER_INFO",b="RECEIVE_POSTER_INFO",P="FAIL_POSTER_INFO",O="RECEIVE_PAGINATION_INFO",v="SET_PAGE",C="CHANGE_ITEMS_PER_PAGE";function N(e,t){return function(n){n(I());var r="https://api.trakt.tv/shows/popular?page="+e+"&limit="+t,a={headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":f}};return p()(r,a).then(function(e){var t=parseInt(e.headers.get("X-Pagination-Page-Count")),r=parseInt(e.headers.get("X-Pagination-Item-Count"));return n(_(t,r)),e.json()}).then(function(e){n(w(e)),e.map(function(e){return n(j(e.ids.tvdb))})})}}function I(){return{type:E}}function w(e){return{type:g,shows:e}}function _(e,t){return{type:O,pageCount:e,itemCount:t}}function j(e){return function(t){t(y(e));var n="https://webservice.fanart.tv/v3/tv/"+e+"?api_key="+m+"&client_key="+d;return p()(n).then(function(n){if(n.ok)return n.json();t(T(e))}).then(function(n){return t(S(n,e))})}}function y(e){return{type:h,posterId:e}}function S(e,t){return{type:b,info:e,posterId:t}}function T(e){return{type:P,posterId:e}}function A(e){return{type:v,pageNumber:e}}function R(e){return{type:C,items:e}}var k=Object(c.combineReducers)({shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case E:return Object(s.a)({},e,{infoNeedToBeChanged:!1,showsDownloaded:!1});case g:console.log(t.shows);var n=1;return Object(s.a)({},e,{info:t.shows.map(function(e){return{id:n++,title:e.title,year:e.year,posterId:e.ids.tvdb}}),showsDownloaded:!0});case O:return Object(s.a)({},e,{pageCount:t.pageCount,itemCount:t.itemCount});case b:return Object(s.a)({},e,{info:e.info.map(function(e){return e.posterId===t.posterId?Object(s.a)({},e,{posterUrl:(n=t.info,n.tvposter?n.tvposter instanceof Array?n.tvposter[0].url:n.tvposter.url:n.seasonposter?n.seasonposter instanceof Array?n.seasonposter[0].url:n.seasonposter.url:"no posters")}):e;var n})});case P:return Object(s.a)({},e,{info:e.info.map(function(e){return e.posterId===t.posterId?Object(s.a)({},e,{posterUrl:"no info"}):e})});case v:return Object(s.a)({},e,{pageNumber:t.pageNumber<1||t.pageNumber>e.pageCount?e.pageNumber:t.pageNumber,infoNeedToBeChanged:!0});case C:return Object(s.a)({},e,{itemsPerPage:t.items,pageNumber:1,infoNeedToBeChanged:!0})}return e}}),U=(n(31),n(8)),F=n(9),G=n(11),V=n(10),B=n(4),H=n(12),D=(n(32),function(e){function t(){return Object(U.a)(this,t),Object(G.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(H.a)(t,e),Object(F.a)(t,[{key:"render",value:function(){var e=this.props.shows,t=e&&e.info&&e.info.map(function(e){return o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,e.id),o.a.createElement("td",null,e.title),o.a.createElement("td",null,e.year?e.year:"\xaf\\_(\u30c4)_/\xaf"),o.a.createElement("td",null,e.posterUrl?"no posters"===e.posterUrl?o.a.createElement("p",null,"Only logo :("):"no info"===e.posterUrl?o.a.createElement("p",null,"No posters ;("):o.a.createElement("a",{href:e.posterUrl,target:"_blank"},o.a.createElement("img",{src:e.posterUrl,className:"poster",alt:e.title+" poster"})):""))});return o.a.createElement("div",{className:"Table"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"\u2116"),o.a.createElement("td",null,"Title"),o.a.createElement("td",null,"Year"),o.a.createElement("td",null,"Poster"))),o.a.createElement("tbody",null,t)))}}]),t}(o.a.Component)),W=Object(l.b)(function(e){return{shows:e.shows}},function(e){return Object(c.bindActionCreators)(r,e)})(D),Q=function(e){return o.a.createElement("ul",{className:"pagination"},e.currPage<=2?"":o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){return e.setPage(1)},className:"prev"},"\xab")),1===e.currPage?"":o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){return e.setPage(e.currPage-1)}},e.currPage-1)),o.a.createElement("li",null,o.a.createElement("a",{className:"active"},e.currPage)),e.currPage===e.totalPages?"":o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){return e.setPage(e.currPage+1)}},e.currPage+1)),e.currPage>=e.totalPages-1?"":o.a.createElement("li",null,o.a.createElement("a",{href:"#",onClick:function(){return e.setPage(e.totalPages)},className:"next"},"\xbb")))},M=function(){return o.a.createElement("div",{className:"loader"})},q=function(e){function t(e){var n;return Object(U.a)(this,t),(n=Object(G.a)(this,Object(V.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(B.a)(n)),n}return Object(H.a)(t,e),Object(F.a)(t,[{key:"handleChange",value:function(e){this.props.changeItemsPerPage(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props.shows,n=t.pageCount&&t.itemCount;if(t.infoNeedToBeChanged)return this.props.fetchShows(t.pageNumber,t.itemsPerPage),o.a.createElement("div",{className:"App"},o.a.createElement(M,null));if(!t.showsDownloaded)return o.a.createElement("div",{className:"App"},o.a.createElement(M,null));if(!n)return o.a.createElement("div",{className:"App"},o.a.createElement(W,null));var r=o.a.createElement("div",null,o.a.createElement("p",null,"TV-shows displayed:",o.a.createElement("select",{value:t.itemsPerPage,onChange:this.handleChange},o.a.createElement("option",{value:5},"5"),o.a.createElement("option",{value:10},"10"),o.a.createElement("option",{value:25},"25"),o.a.createElement("option",{value:50},"50")),". Page ",t.pageNumber," of ",t.pageCount),o.a.createElement("p",null,"Shows in total: ",t.itemCount));return o.a.createElement("div",{className:"App"},o.a.createElement(Q,{setPage:function(t){return e.props.setPage(t)},currPage:t.pageNumber,totalPages:t.pageCount}),o.a.createElement(W,null),r)}}]),t}(o.a.Component),x=Object(l.b)(function(e){return{shows:e.shows}},function(e){return Object(c.bindActionCreators)(r,e)})(q),J={shows:{info:[],pageCount:null,itemCount:null,pageNumber:1,itemsPerPage:10,infoNeedToBeChanged:!0,showsDownloaded:!1}},L=n(20),X=n(21),Y=Object(c.createStore)(k,J,Object(L.composeWithDevTools)(Object(c.applyMiddleware)(X.a)));Object(u.render)(o.a.createElement(l.a,{store:Y},o.a.createElement(x,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.52623e95.chunk.js.map