{"version":3,"sources":["actions/index.js","reducers/index.js","containers/Table.js","containers/App.js","initState.js","index.js"],"names":["TRAKT_CLIENT_KEY","FANART_PERSONAL_KEY","FANART_PROJECT_KEY","REQUEST_SHOWS","RECEIVE_SHOWS","REQUEST_POSTER_INFO","RECEIVE_POSTER_INFO","RECEIVE_PAGINATION_INFO","fetchShows","pageNumber","itemsPerPage","dispatch","requestShows","url","options","headers","Content-Type","trakt-api-version","trakt-api-key","fetch","then","response","pageCount","get","itemCount","receivePaginationInfo","json","receiveShows","map","info","fetchPosterInfo","ids","tvdb","type","shows","posterId","console","log","requestPosterInfo","receivePosterInfo","rootReducer","combineReducers","state","arguments","length","undefined","action","id","Object","objectSpread","show","title","year","infoFetched","posterUrl","clearlogo","Array","hdtvlogo","Table","this","props","showsElems","react_default","a","createElement","key","src","alt","className","React","Component","connect","bindActionCreators","actionCreators","App","extraInfo","containers_Table","initState","store","createStore","composeWithDevTools","applyMiddleware","thunkMiddleware","render","es","containers_App","document","getElementById"],"mappings":"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","file":"static/js/main.c4e05370.chunk.js","sourcesContent":["import fetch from 'cross-fetch';\n\nconst TRAKT_CLIENT_KEY = \"1098aa9283a45930885916b98e046d43cd7301e4de4198c5e624aa39b5cd6972\";\nconst FANART_PERSONAL_KEY = \"313966685b1712ca5f9c4c15427da38d\";\nconst FANART_PROJECT_KEY = \"4a2226e35da3b653ed9d980ae3efb5f8\";\nexport const REQUEST_SHOWS = \"REQUEST_SHOWS\";\nexport const RECEIVE_SHOWS = \"RECEIVE_SHOWS\";\nexport const REQUEST_POSTER_INFO = \"REQUEST_POSTER_INFO\";\nexport const RECEIVE_POSTER_INFO = \"RECEIVE_POSTER_INFO\";\nexport const RECEIVE_PAGINATION_INFO = \"RECEIVE_PAGINATION_INFO\";\n\n\n// Getting all shows info\n\nexport function fetchShows(pageNumber, itemsPerPage) {\n  return dispatch => {\n    dispatch(requestShows());\n\n    const url = \"https://api.trakt.tv/shows/popular?page=\" + pageNumber + \"&limit=\" + itemsPerPage;\n    const options = {\n      headers: {\n        \"Content-Type\": 'application/json',\n        \"trakt-api-version\": '2',\n        \"trakt-api-key\": TRAKT_CLIENT_KEY\n      }\n    };\n    return fetch(url, options)\n      .then(response => {\n        const pageCount = response.headers.get(\"X-Pagination-Page-Count\");\n        const itemCount = response.headers.get(\"X-Pagination-Item-Count\");\n        dispatch(receivePaginationInfo(pageCount, itemCount));\n        return response.json()\n      })\n      .then(json => {\n        dispatch(receiveShows(json));\n        json.map(info => dispatch(fetchPosterInfo(info.ids.tvdb)));\n      });\n  }\n}\n\nexport function requestShows() {\n  return {\n    type: REQUEST_SHOWS\n  }\n}\n\nexport function receiveShows(shows) {\n  return {\n    type: RECEIVE_SHOWS,\n    shows: shows,\n  }\n}\n\nexport function receivePaginationInfo(pageCount, itemCount) {\n  return {\n    type: RECEIVE_PAGINATION_INFO,\n    pageCount: pageCount,\n    itemCount: itemCount,\n  }\n}\n\n\n// Getting poster info\n\nexport function fetchPosterInfo(posterId) {\n  console.log(\"sd\");\n  return dispatch => {\n    dispatch(requestPosterInfo(posterId));\n\n    const url = \"https://webservice.fanart.tv/v3/tv/\" + posterId + \"?api_key=\" + FANART_PROJECT_KEY +\n      \"&client_key=\" + FANART_PERSONAL_KEY;\n    const options = {\n      headers: {\n        // \"api-key\": FANART_PROJECT_KEY,\n        // \"client-key\": FANART_PERSONAL_KEY\n      }\n    };\n    return fetch(url, options)\n      .then(response => response.json())\n      .then(json => dispatch(receivePosterInfo(json, posterId)));\n  }\n}\n\nexport function requestPosterInfo(posterId) {\n  return {\n    type: REQUEST_POSTER_INFO,\n    posterId: posterId\n  }\n}\n\nexport function receivePosterInfo(info, posterId) {\n  return {\n    type: RECEIVE_POSTER_INFO,\n    info: info,\n    posterId: posterId\n  }\n}\n","import { combineReducers } from 'redux'\nimport {RECEIVE_PAGINATION_INFO, RECEIVE_POSTER_INFO, RECEIVE_SHOWS, REQUEST_SHOWS} from \"../actions\";\n\nexport function showsReducer(state = {}, action) {\n  switch (action.type) {\n    case REQUEST_SHOWS:\n      return state;\n    case RECEIVE_SHOWS:\n      console.log(action.shows);\n      let id = 0;\n      return {\n        ...state,\n        info: action.shows.map(show => ({\n          id: id++,\n          title: show.title,\n          year: show.year,\n          posterId: show.ids.tvdb\n        })),\n        infoFetched: true\n      };\n    case RECEIVE_PAGINATION_INFO:\n      return {\n        ...state,\n        pageCount: action.pageCount,\n        itemCount: action.itemCount\n      };\n    case RECEIVE_POSTER_INFO:\n      // TODO: normal algo\n      return {\n        ...state,\n        info: state.info.map(show =>\n            show.posterId === action.posterId ? {...show, posterUrl: getPosterUrlFromInfo(action.info)} : show\n          )\n      }\n  }\n  return state;\n}\n\nfunction getPosterUrlFromInfo(info) {\n  if (info.clearlogo) {\n    if (info.clearlogo instanceof Array) return info.clearlogo[0].url;\n    return info.clearlogo.url;\n  }\n  if (info.hdtvlogo) {\n    if (info.hdtvlogo instanceof Array) return info.hdtvlogo[0].url;\n    return info.hdtvlogo.url;\n  }\n  return null;\n}\n\nconst rootReducer = combineReducers({\n  shows: showsReducer\n});\n\nexport default rootReducer;\n","import React from \"react\";\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\nimport * as actionCreators from \"../actions\"\n\nclass Table extends React.Component {\n  render() {\n    const {shows} = this.props;\n    const showsElems = shows && shows.info && shows.info.map(show =>\n      <tr key={show.id}>\n        <td>{show.id}</td>\n        <td>{show.title}</td>\n        <td>{show.year}</td>\n        <td>{show.posterUrl ? <img src={show.posterUrl} alt={show.title + \" poster\"}/> : \"\"}</td>\n      </tr>\n    );\n\n    return (\n      <div className=\"Table\">\n        <table>\n          <thead>\n            <tr>\n              <td>ID</td>\n              <td>Title</td>\n              <td>Year</td>\n              <td>Poster</td>\n            </tr>\n          </thead>\n          <tbody>{showsElems}</tbody>\n        </table>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    shows: state.shows\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(actionCreators, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Table);\n","import React from 'react';\nimport '../App.css';\nimport Table from \"./Table\";\nimport * as actionCreators from \"../actions\";\nimport {connect} from \"react-redux\";\nimport {bindActionCreators} from \"redux\";\n\nclass App extends React.Component {\n  componentWillMount() {\n    const {shows} = this.props;\n    if (shows && shows.infoFetched === false) {\n      this.props.fetchShows(shows.pageNumber, shows.itemsPerPage);\n    }\n  }\n\n  render() {\n    const {shows} = this.props;\n    const extraInfo = <div>\n      <p>TV-shows displayed: {shows.itemsPerPage}. Page {shows.pageNumber} of {shows.pageCount}</p>\n      <p>Shows in total: {shows.itemCount}</p>\n    </div>;\n\n    return <div className=\"App\">\n      <Table/>\n      {shows.infoFetched ? extraInfo : null}\n    </div>\n  }\n}\n\nconst mapStateToProps = (state) => {\n  return {\n    shows: state.shows\n  }\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return bindActionCreators(actionCreators, dispatch);\n};\n\nexport default connect(mapStateToProps, mapDispatchToProps)(App);\n","const initState = {\n  shows: {\n    info: [],\n    infoFetched: false,\n    pageCount: null,\n    itemCount: null,\n    pageNumber: 1,\n    itemsPerPage: 10\n  }\n};\n\nexport default initState;\n","import React from 'react';\nimport { render } from 'react-dom'\nimport { applyMiddleware, createStore } from 'redux'\nimport { Provider } from 'react-redux'\nimport rootReducer from './reducers/index'\nimport './index.css';\nimport App from './containers/App';\nimport initState from \"./initState\";\nimport { composeWithDevTools } from 'redux-devtools-extension';\nimport thunkMiddleware from 'redux-thunk'\n// import * as serviceWorker from './serviceWorker';\n\n\nconst store = createStore(rootReducer, initState, composeWithDevTools(applyMiddleware(thunkMiddleware)));\n\nrender(\n  <Provider store={store}>\n    <App />\n  </Provider>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}