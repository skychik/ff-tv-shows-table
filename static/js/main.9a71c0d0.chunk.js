(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(35)},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"REQUEST_SHOWS",function(){return m}),n.d(r,"RECEIVE_SHOWS",function(){return E}),n.d(r,"REQUEST_POSTER_INFO",function(){return g}),n.d(r,"RECEIVE_POSTER_INFO",function(){return b}),n.d(r,"FAIL_POSTER_INFO",function(){return v}),n.d(r,"RECEIVE_PAGINATION_INFO",function(){return O}),n.d(r,"SET_PAGE",function(){return w}),n.d(r,"CHANGE_ITEMS_PER_PAGE",function(){return C}),n.d(r,"SHOW_IMG",function(){return P}),n.d(r,"SET_SEARCH_VALUE",function(){return S}),n.d(r,"REQUEST_SEARCH_SHOWS",function(){return I}),n.d(r,"RECEIVE_SEARCH_SHOWS",function(){return _}),n.d(r,"FAIL_SEARCH_SHOWS",function(){return j}),n.d(r,"fetchShows",function(){return N}),n.d(r,"receivePaginationInfo",function(){return A}),n.d(r,"setSearchValue",function(){return R}),n.d(r,"searchShows",function(){return T}),n.d(r,"fetchPosterInfo",function(){return H}),n.d(r,"requestPosterInfo",function(){return U}),n.d(r,"receivePosterInfo",function(){return F}),n.d(r,"failPosterInfo",function(){return V}),n.d(r,"revealImg",function(){return W}),n.d(r,"setPage",function(){return L}),n.d(r,"changeItemsPerPage",function(){return G});var a=n(0),o=n.n(a),s=n(12),u=n(2),c=n(4),i=n(1),l=n(20),p=n(13),d=n.n(p),h="313966685b1712ca5f9c4c15427da38d",f="4a2226e35da3b653ed9d980ae3efb5f8",m="REQUEST_SHOWS",E="RECEIVE_SHOWS",g="REQUEST_POSTER_INFO",b="RECEIVE_POSTER_INFO",v="FAIL_POSTER_INFO",O="RECEIVE_PAGINATION_INFO",w="SET_PAGE",C="CHANGE_ITEMS_PER_PAGE",P="SHOW_IMG",S="SET_SEARCH_VALUE",I="REQUEST_SEARCH_SHOWS",_="RECEIVE_SEARCH_SHOWS",j="FAIL_SEARCH_SHOWS",y={headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":"1098aa9283a45930885916b98e046d43cd7301e4de4198c5e624aa39b5cd6972"}};function N(e,t){return function(n){n({type:m});var r="https://api.trakt.tv/shows/popular?extended=full&page="+e+"&limit="+t;return d()(r,y).then(function(e){if(e.ok)return n(A(e)),e.json();n(k())}).then(function(e){n({type:E,shows:e}),e.map(function(e){return n(H(e.ids.tvdb))})})}}function A(e){return{type:O,pageCount:parseInt(e.headers.get("X-Pagination-Page-Count")),itemCount:parseInt(e.headers.get("X-Pagination-Item-Count"))}}function R(e){return{type:S,value:e}}function T(e,t,n){return function(r){r({type:I}),console.log("value="+e);var a="https://api.trakt.tv/search/show?extended=full&query="+e+"&page="+t+"&limit="+n;return d()(a,y).then(function(e){if(e.ok)return r(A(e)),e.json();r(k())}).then(function(e){r({type:_,shows:e}),e.map(function(e){return r(H(e.show.ids.tvdb))})})}}function k(){return{type:j}}function H(e){return function(t){t(U(e));var n="https://webservice.fanart.tv/v3/tv/"+e+"?api_key="+f+"&client_key="+h;return d()(n).then(function(n){if(n.ok)return n.json();t(V(e))}).then(function(n){return t(F(n,e))})}}function U(e){return{type:g,posterId:e}}function F(e,t){return{type:b,info:e,posterId:t}}function V(e){return{type:v,posterId:e}}function W(e){return{type:P,showId:e}}function L(e){return{type:w,pageNumber:e}}function G(e){return{type:C,items:e}}var x=Object(u.combineReducers)({shows:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case m:case I:return Object(i.a)({},t,{infoNeedToBeChanged:!1,showsDownloaded:!1});case E:return e=1+(t.pageNumber-1)*t.itemsPerPage,Object(i.a)({},t,{info:n.shows&&n.shows.map(function(t){return{id:e++,title:t.title,year:t.year,rating:t.rating,posterId:t.ids.tvdb,slug:t.ids.slug,imgLoaded:!1}}),showsDownloaded:!0});case _:return e=1+(t.pageNumber-1)*t.itemsPerPage,Object(i.a)({},t,{info:n.shows&&n.shows.map(function(t){return{id:e++,title:t.show.title,year:t.show.year,rating:t.show.rating,posterId:t.show.ids.tvdb,slug:t.show.ids.slug,imgLoaded:!1}}),showsDownloaded:!0});case O:return Object(i.a)({},t,{pageCount:n.pageCount,itemCount:n.itemCount});case b:return Object(i.a)({},t,{info:t.info&&t.info.map(function(e){return e.posterId===n.posterId?Object(i.a)({},e,{posterUrl:(t=n.info,t.tvposter?t.tvposter instanceof Array?t.tvposter[0].url:t.tvposter.url:t.seasonposter?t.seasonposter instanceof Array?t.seasonposter[0].url:t.seasonposter.url:"no posters")}):e;var t})});case v:return Object(i.a)({},t,{info:t.info&&t.info.map(function(e){return e.posterId===n.posterId?Object(i.a)({},e,{posterUrl:"no info"}):e})});case P:return Object(i.a)({},t,{info:t.info&&t.info.map(function(e){return e.id===n.showId?Object(i.a)({},e,{imgLoaded:!0}):e})});case w:return Object(i.a)({},t,{pageNumber:n.pageNumber<1||n.pageNumber>t.pageCount?t.pageNumber:n.pageNumber,infoNeedToBeChanged:!0});case C:return Object(i.a)({},t,{itemsPerPage:n.items,pageNumber:1,infoNeedToBeChanged:!0})}return t},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case S:return Object(i.a)({},e,{value:l.escapeRegExp(t.value.trim())});case I:return Object(i.a)({},e,{pending:!0,failed:!1});case _:return Object(i.a)({},e,{pending:!1});case j:return Object(i.a)({},e,{pending:!1,failed:!0})}return e},info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch((arguments.length>1?arguments[1]:void 0).type){case _:return Object(i.a)({},e,{mode:"search"});case E:return Object(i.a)({},e,{mode:"popular"})}return e}}),B=(n(33),n(6)),D=n(7),Q=n(9),K=n(8),M=n(3),q=n(10),J=(n(34),function(){return o.a.createElement("div",{className:"spinner"})}),X=function(e){function t(){return Object(B.a)(this,t),Object(Q.a)(this,Object(K.a)(t).apply(this,arguments))}return Object(q.a)(t,e),Object(D.a)(t,[{key:"render",value:function(){var e=this,t=this.props.shows;console.log("!shows.info || shows.info === []"),console.log(!t.info||t.info.isEmpty);var n=t.info&&t.info.map(function(t){return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",null,o.a.createElement("a",{href:"https://trakt.tv/shows/"+t.slug,target:"_blank",rel:"noopener noreferrer"},t.title)),o.a.createElement("td",null,t.year?t.year:"\xaf\\_(\u30c4)_/\xaf"),o.a.createElement("td",null,t.rating?t.rating:"\xaf\\_(\u30c4)_/\xaf"),o.a.createElement("td",null,t.posterUrl?"no posters"===t.posterUrl?o.a.createElement("p",null,"Only logo :("):"no info"===t.posterUrl?o.a.createElement("p",null,"No posters ;("):o.a.createElement("a",{href:t.posterUrl,rel:"noopener noreferrer",target:"_blank"},t.imgLoaded?"":o.a.createElement(J,null),o.a.createElement("img",{src:t.posterUrl,className:"poster",alt:t.title+" poster",onLoad:function(){return e.props.revealImg(t.id)},hidden:!t.imgLoaded})):o.a.createElement(J,null)))});return o.a.createElement("div",{className:"Table"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"\u2116"),o.a.createElement("td",null,"Title"),o.a.createElement("td",null,"Year"),o.a.createElement("td",null,"Rating"),o.a.createElement("td",null,"Poster"))),o.a.createElement("tbody",null,n)))}}]),t}(o.a.Component),Y=Object(c.b)(function(e){return{shows:e.shows,info:e.info}},function(e){return Object(u.bindActionCreators)(r,e)})(X),z=function(e){var t=e.currPage,n=e.totalPages,r=t<=3?"":o.a.createElement("li",null,o.a.createElement("button",{className:"prev",onClick:function(){return e.setPage(1)}},"\xab")),a=t>=n-2?"":o.a.createElement("li",null,o.a.createElement("button",{className:"next",onClick:function(){return e.setPage(n)}},"\xbb")),s=function(r,a){return a<r||a>n?"":o.a.createElement("li",null,o.a.createElement("button",{className:t===a?"active":"",onClick:function(){return e.setPage(a)}},a))};return t-2<1?o.a.createElement("ul",{className:"pagination"},r,s(1,1),s(2,2),s(3,3),s(4,4),s(5,5),a):t+2>n?o.a.createElement("ul",{className:"pagination"},r,s(1,n-4),s(2,n-3),s(3,n-2),s(4,n-1),s(5,n),a):o.a.createElement("ul",{className:"pagination"},r,s(1,t-2),s(2,t-1),s(3,t),s(4,t+1),s(5,t+2),a)},Z=function(){return o.a.createElement("div",{className:"loader"})},$=function(e){return o.a.createElement("h1",null,e.text.toUpperCase())},ee=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(Q.a)(this,Object(K.a)(t).call(this,e))).handleInputChange=n.handleInputChange.bind(Object(M.a)(n)),n.handleKeyPressed=n.handleKeyPressed.bind(Object(M.a)(n)),n}return Object(q.a)(t,e),Object(D.a)(t,[{key:"handleInputChange",value:function(){this.props.setSearchValue(this.search.value)}},{key:"handleKeyPressed",value:function(e){var t=this.props,n=t.shows,r=t.search;"Enter"===e.key&&this.props.searchShows(r.value,n.pageNumber,n.itemsPerPage)}},{key:"render",value:function(){var e=this,t=this.props,n=t.shows,r=t.search;return o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("input",{type:"search",placeholder:"Search...",ref:function(t){return e.search=t},onChange:this.handleInputChange,onKeyPress:this.handleKeyPressed}),o.a.createElement("button",{onClick:function(){return e.props.searchShows(r.value,n.pageNumber,n.itemsPerPage)}},"Find")))}}]),t}(o.a.Component),te=Object(c.b)(function(e){return{shows:e.shows,search:e.search}},function(e){return Object(u.bindActionCreators)(r,e)})(ee),ne=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(Q.a)(this,Object(K.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(M.a)(n)),n}return Object(q.a)(t,e),Object(D.a)(t,[{key:"handleChange",value:function(e){this.props.changeItemsPerPage(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props,n=t.shows,r=t.info,a=t.search,s=n.pageCount&&n.itemCount,u=o.a.createElement("div",null,o.a.createElement("p",null,"TV-shows displayed:",o.a.createElement("select",{value:n.itemsPerPage,onChange:this.handleChange},o.a.createElement("option",{value:5},"5"),o.a.createElement("option",{value:10},"10"),o.a.createElement("option",{value:25},"25"),o.a.createElement("option",{value:50},"50")),". Page ",n.pageNumber," of ",n.pageCount),o.a.createElement("p",null,"Shows in total: ",n.itemCount)),c="search"!==r.mode?"":o.a.createElement("h2",null,'Searched results for: "',a.value,'"');if(n.infoNeedToBeChanged){switch(r.mode){case"popular":this.props.fetchShows(n.pageNumber,n.itemsPerPage);break;case"search":this.props.searchShows(a.value,n.pageNumber,n.itemsPerPage)}return o.a.createElement("div",{className:"App"},o.a.createElement(Z,null))}return n.showsDownloaded?s?o.a.createElement("div",{className:"App"},o.a.createElement(te,null),o.a.createElement($,{text:"tv show posters"}),o.a.createElement(z,{setPage:function(t){return e.props.setPage(t)},currPage:n.pageNumber,totalPages:n.pageCount}),c,o.a.createElement(Y,null),u):o.a.createElement("div",{className:"App"},o.a.createElement(te,null),o.a.createElement($,{text:"tv show posters"}),c,o.a.createElement(Y,null)):o.a.createElement("div",{className:"App"},o.a.createElement(Z,null))}}]),t}(o.a.Component),re=Object(c.b)(function(e){return{shows:e.shows,search:e.search,info:e.info}},function(e){return Object(u.bindActionCreators)(r,e)})(ne),ae={shows:{info:[],pageCount:null,itemCount:null,pageNumber:1,itemsPerPage:10,infoNeedToBeChanged:!0,showsDownloaded:!1},search:{value:"",pending:!1,failed:!1},info:{mode:"popular"}},oe=n(21),se=n(22),ue=Object(u.createStore)(x,ae,Object(oe.composeWithDevTools)(Object(u.applyMiddleware)(se.a)));Object(s.render)(o.a.createElement(c.a,{store:ue},o.a.createElement(re,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.9a71c0d0.chunk.js.map