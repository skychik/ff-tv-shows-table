(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{22:function(e,t,n){e.exports=n(33)},31:function(e,t,n){},32:function(e,t,n){},33:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"REQUEST_SHOWS",function(){return m}),n.d(r,"RECEIVE_SHOWS",function(){return b}),n.d(r,"REQUEST_POSTER_INFO",function(){return g}),n.d(r,"RECEIVE_POSTER_INFO",function(){return h}),n.d(r,"RECEIVE_PAGINATION_INFO",function(){return v}),n.d(r,"SET_NEXT_PAGE",function(){return O}),n.d(r,"SET_PREVIOUS_PAGE",function(){return P}),n.d(r,"fetchShows",function(){return N}),n.d(r,"requestShows",function(){return C}),n.d(r,"receiveShows",function(){return I}),n.d(r,"receivePaginationInfo",function(){return j}),n.d(r,"fetchPosterInfo",function(){return S}),n.d(r,"requestPosterInfo",function(){return w}),n.d(r,"receivePosterInfo",function(){return _}),n.d(r,"setNextPage",function(){return y}),n.d(r,"setPreviousPage",function(){return T});var a=n(0),o=n.n(a),u=n(6),c=n(1),i=n(4),s=n(3),l=n(16),p=n.n(l),d="1098aa9283a45930885916b98e046d43cd7301e4de4198c5e624aa39b5cd6972",f="313966685b1712ca5f9c4c15427da38d",E="4a2226e35da3b653ed9d980ae3efb5f8",m="REQUEST_SHOWS",b="RECEIVE_SHOWS",g="REQUEST_POSTER_INFO",h="RECEIVE_POSTER_INFO",v="RECEIVE_PAGINATION_INFO",O="SET_NEXT_PAGE",P="SET_PREVIOUS_PAGE";function N(e,t){return function(n){n(C());var r="https://api.trakt.tv/shows/popular?page="+e+"&limit="+t,a={headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":d}};return p()(r,a).then(function(e){var t=parseInt(e.headers.get("X-Pagination-Page-Count")),r=parseInt(e.headers.get("X-Pagination-Item-Count"));return n(j(t,r)),e.json()}).then(function(e){n(I(e)),e.map(function(e){return n(S(e.ids.tvdb))})})}}function C(){return{type:m}}function I(e){return{type:b,shows:e}}function j(e,t){return{type:v,pageCount:e,itemCount:t}}function S(e){return function(t){t(w(e));var n="https://webservice.fanart.tv/v3/tv/"+e+"?api_key="+E+"&client_key="+f;return p()(n,{headers:{}}).then(function(e){return e.json()}).then(function(n){return t(_(n,e))})}}function w(e){return{type:g,posterId:e}}function _(e,t){return{type:h,info:e,posterId:t}}function y(){return{type:O}}function T(){return{type:P}}var R=Object(c.combineReducers)({shows:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return e;case b:console.log(t.shows);var n=1;return Object(s.a)({},e,{info:t.shows.map(function(e){return{id:n++,title:e.title,year:e.year,posterId:e.ids.tvdb}}),infoNeedToBeChanged:!1});case v:return Object(s.a)({},e,{pageCount:t.pageCount,itemCount:t.itemCount});case h:return Object(s.a)({},e,{info:e.info.map(function(e){return e.posterId===t.posterId?Object(s.a)({},e,{posterUrl:(n=t.info,n.tvposter?n.tvposter instanceof Array?n.tvposter[0].url:n.tvposter.url:n.seasonposter?n.seasonposter instanceof Array?n.seasonposter[0].url:n.seasonposter.url:null)}):e;var n})});case O:return Object(s.a)({},e,{pageNumber:e.pageNumber===e.pageCount?e.pageNumber:e.pageNumber+1,infoNeedToBeChanged:!0});case P:return Object(s.a)({},e,{pageNumber:1===e.pageNumber?1:e.pageNumber-1,infoNeedToBeChanged:!0})}return e}}),A=(n(31),n(8)),k=n(9),U=n(11),V=n(10),B=n(12),F=(n(32),function(e){function t(){return Object(A.a)(this,t),Object(U.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this.props.shows,t=e&&e.info&&e.info.map(function(e){return o.a.createElement("tr",{key:e.id},o.a.createElement("td",null,e.id),o.a.createElement("td",null,e.title),o.a.createElement("td",null,e.year),o.a.createElement("td",null,e.posterUrl?o.a.createElement("a",{href:e.posterUrl,target:"_blank"},null===e.posterUrl?"No poster ;(":o.a.createElement("img",{src:e.posterUrl,className:"poster",alt:e.title+" poster"})):""))});return o.a.createElement("div",{className:"Table"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("td",null,"\u2116"),o.a.createElement("td",null,"Title"),o.a.createElement("td",null,"Year"),o.a.createElement("td",null,"Poster"))),o.a.createElement("tbody",null,t)))}}]),t}(o.a.Component)),G=Object(i.b)(function(e){return{shows:e.shows}},function(e){return Object(c.bindActionCreators)(r,e)})(F),x=function(e){return o.a.createElement("div",null,o.a.createElement("button",{onClick:function(){return e.previousPage()},disabled:1===e.currPage},"<"),e.currPage,o.a.createElement("button",{onClick:function(){return e.nextPage()},disabled:e.currPage===e.totalPages},">"))},W=function(){return o.a.createElement("div",{className:"loading"},"Loading...")},H=function(e){function t(){return Object(A.a)(this,t),Object(U.a)(this,Object(V.a)(t).apply(this,arguments))}return Object(B.a)(t,e),Object(k.a)(t,[{key:"render",value:function(){var e=this,t=this.props.shows,n=t.pageCount&&t.itemCount;if(t.infoNeedToBeChanged)return this.props.fetchShows(t.pageNumber,t.itemsPerPage),o.a.createElement("div",{className:"App"},o.a.createElement(W,null));if(!n)return o.a.createElement("div",{className:"App"},o.a.createElement(G,null));var r=o.a.createElement("div",null,o.a.createElement("p",null,"TV-shows displayed: ",t.itemsPerPage,". Page ",t.pageNumber," of ",t.pageCount),o.a.createElement("p",null,"Shows in total: ",t.itemCount));return o.a.createElement("div",{className:"App"},o.a.createElement(x,{previousPage:function(){return e.props.setPreviousPage()},nextPage:function(){return e.props.setNextPage()},currPage:t.pageNumber,totalPages:t.pageCount}),o.a.createElement(G,null),r)}}]),t}(o.a.Component),Q=Object(i.b)(function(e){return{shows:e.shows}},function(e){return Object(c.bindActionCreators)(r,e)})(H),X={shows:{info:[],pageCount:null,itemCount:null,pageNumber:1,itemsPerPage:10,infoNeedToBeChanged:!0}},q=n(20),J=n(21),D=Object(c.createStore)(R,X,Object(q.composeWithDevTools)(Object(c.applyMiddleware)(J.a)));Object(u.render)(o.a.createElement(i.a,{store:D},o.a.createElement(Q,null)),document.getElementById("root"))}},[[22,1,2]]]);
//# sourceMappingURL=main.341f1ec9.chunk.js.map