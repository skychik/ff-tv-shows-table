(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,n){e.exports=n(35)},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"REQUEST_SHOWS",function(){return m}),n.d(a,"RECEIVE_SHOWS",function(){return E}),n.d(a,"REQUEST_POSTER_INFO",function(){return g}),n.d(a,"RECEIVE_POSTER_INFO",function(){return v}),n.d(a,"FAIL_POSTER_INFO",function(){return b}),n.d(a,"RECEIVE_PAGINATION_INFO",function(){return O}),n.d(a,"SET_PAGE",function(){return w}),n.d(a,"CHANGE_ITEMS_PER_PAGE",function(){return S}),n.d(a,"SHOW_IMG",function(){return C}),n.d(a,"SET_SEARCH_VALUE",function(){return y}),n.d(a,"REQUEST_SEARCH_SHOWS",function(){return P}),n.d(a,"RECEIVE_SEARCH_SHOWS",function(){return _}),n.d(a,"FAIL_SEARCH_SHOWS",function(){return I}),n.d(a,"SET_SEARCH_MODE",function(){return j}),n.d(a,"fetchShows",function(){return k}),n.d(a,"receivePaginationInfo",function(){return T}),n.d(a,"setSearchValue",function(){return A}),n.d(a,"searchShows",function(){return R}),n.d(a,"fetchPosterInfo",function(){return M}),n.d(a,"requestPosterInfo",function(){return U}),n.d(a,"receivePosterInfo",function(){return V}),n.d(a,"failPosterInfo",function(){return L}),n.d(a,"revealImg",function(){return F}),n.d(a,"setPage",function(){return W}),n.d(a,"changeItemsPerPage",function(){return G}),n.d(a,"setSearchMode",function(){return x});var r=n(0),o=n.n(r),s=n(12),c=n(2),u=n(4),i=n(1),l=n(20),d=n(13),h=n.n(d),p="313966685b1712ca5f9c4c15427da38d",f="4a2226e35da3b653ed9d980ae3efb5f8",m="REQUEST_SHOWS",E="RECEIVE_SHOWS",g="REQUEST_POSTER_INFO",v="RECEIVE_POSTER_INFO",b="FAIL_POSTER_INFO",O="RECEIVE_PAGINATION_INFO",w="SET_PAGE",S="CHANGE_ITEMS_PER_PAGE",C="SHOW_IMG",y="SET_SEARCH_VALUE",P="REQUEST_SEARCH_SHOWS",_="RECEIVE_SEARCH_SHOWS",I="FAIL_SEARCH_SHOWS",j="SET_SEARCH_MODE",N={headers:{"Content-Type":"application/json","trakt-api-version":"2","trakt-api-key":"1098aa9283a45930885916b98e046d43cd7301e4de4198c5e624aa39b5cd6972"}};function k(e,t){return function(n){n({type:m});var a="https://api.trakt.tv/shows/popular?extended=full&page="+e+"&limit="+t;return h()(a,N).then(function(e){if(e.ok)return n(T(e)),e.json();n(H())}).then(function(e){n({type:E,shows:e}),e.map(function(e){return n(M(e.ids.tvdb))})})}}function T(e){return{type:O,pageCount:parseInt(e.headers.get("X-Pagination-Page-Count")),itemCount:parseInt(e.headers.get("X-Pagination-Item-Count"))}}function A(e){return{type:y,value:e}}function R(e,t,n,a){return function(r){var o;switch(r({type:P}),console.log("value="+e),t){case"title":o="title";break;case"overview":o="overview";break;case"anyLangTitle":o="aliases";break;default:o=""}var s="https://api.trakt.tv/search/show?extended=full&field="+o+"&query="+e+"&page="+n+"&limit="+a;return h()(s,N).then(function(e){if(e.ok)return r(T(e)),e.json();r(H())}).then(function(e){r({type:_,shows:e}),e.map(function(e){return r(M(e.show.ids.tvdb))})})}}function H(){return{type:I}}function M(e){return function(t){t(U(e));var n="https://webservice.fanart.tv/v3/tv/"+e+"?api_key="+f+"&client_key="+p;return h()(n).then(function(n){if(n.ok)return n.json();t(L(e))}).then(function(n){return t(V(n,e))})}}function U(e){return{type:g,posterId:e}}function V(e,t){return{type:v,info:e,posterId:t}}function L(e){return{type:b,posterId:e}}function F(e){return{type:C,showId:e}}function W(e){return{type:w,pageNumber:e}}function G(e){return{type:S,items:e}}function x(e){return{type:j,mode:e}}var D=Object(c.combineReducers)({shows:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;switch(n.type){case m:case P:return Object(i.a)({},t,{infoNeedToBeChanged:!1,showsDownloaded:!1});case E:return e=1+(t.pageNumber-1)*t.itemsPerPage,Object(i.a)({},t,{info:n.shows&&n.shows.map(function(t){return{id:e++,title:t.title,overview:t.overview,year:t.year,rating:t.rating,votes:t.votes,posterId:t.ids.tvdb,slug:t.ids.slug,imgLoaded:!1}}),showsDownloaded:!0});case _:return e=1+(t.pageNumber-1)*t.itemsPerPage,Object(i.a)({},t,{info:n.shows&&n.shows.map(function(t){return{id:e++,title:t.show.title,overview:t.show.overview,year:t.show.year,rating:t.show.rating,votes:t.show.votes,posterId:t.show.ids.tvdb,slug:t.show.ids.slug,imgLoaded:!1}}),showsDownloaded:!0});case O:return Object(i.a)({},t,{pageCount:n.pageCount,itemCount:n.itemCount});case v:return Object(i.a)({},t,{info:t.info&&t.info.map(function(e){return e.posterId===n.posterId?Object(i.a)({},e,{posterUrl:(t=n.info,t.tvposter?t.tvposter instanceof Array?t.tvposter[0].url:t.tvposter.url:t.seasonposter?t.seasonposter instanceof Array?t.seasonposter[0].url:t.seasonposter.url:"no posters")}):e;var t})});case b:return Object(i.a)({},t,{info:t.info&&t.info.map(function(e){return e.posterId===n.posterId?Object(i.a)({},e,{posterUrl:"no info"}):e})});case C:return Object(i.a)({},t,{info:t.info&&t.info.map(function(e){return e.id===n.showId?Object(i.a)({},e,{imgLoaded:!0}):e})});case w:return Object(i.a)({},t,{pageNumber:n.pageNumber<1||n.pageNumber>t.pageCount?t.pageNumber:n.pageNumber,infoNeedToBeChanged:!0});case S:return Object(i.a)({},t,{itemsPerPage:n.items,pageNumber:1,infoNeedToBeChanged:!0})}return t},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return Object(i.a)({},e,{value:l.escapeRegExp(t.value.trim())});case P:return Object(i.a)({},e,{previousValue:e.value,value:"",pending:!0,failed:!1});case _:return Object(i.a)({},e,{pending:!1});case I:return Object(i.a)({},e,{pending:!1,failed:!0})}return e},info:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(i.a)({},e,{fetchedSearchMode:e.searchMode,mode:"search"});case m:return Object(i.a)({},e,{mode:"popular"});case j:return Object(i.a)({},e,{searchMode:t.mode})}return e}}),B=(n(33),n(6)),Q=n(7),K=n(9),q=n(8),J=n(3),X=n(10),Y=(n(34),function(){return o.a.createElement("div",{className:"spinner"})}),z=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(K.a)(this,Object(q.a)(t).call(this,e))).handleSorting=n.handleSorting.bind(Object(J.a)(n)),n}return Object(X.a)(t,e),Object(Q.a)(t,[{key:"handleSorting",value:function(e){}},{key:"render",value:function(){var e=this,t=this.props.shows;console.log("!shows.info || shows.info === []"),console.log(!t.info||t.info.isEmpty);var n=t.info&&t.info.map(function(t){var n=t.overview?t.overview:"\xaf\\_(\u30c4)_/\xaf",a=t.year?t.year:"\xaf\\_(\u30c4)_/\xaf",r=t.rating;return o.a.createElement("tr",{key:t.id},o.a.createElement("td",null,t.id),o.a.createElement("td",null,o.a.createElement("a",{href:"https://trakt.tv/shows/"+t.slug,target:"_blank",rel:"noopener noreferrer"},t.title)),o.a.createElement("td",null,n),o.a.createElement("td",null,a),o.a.createElement("td",null,r),o.a.createElement("td",null,t.posterUrl?"no posters"===t.posterUrl?o.a.createElement("p",null,"Only logo :("):"no info"===t.posterUrl?o.a.createElement("p",null,"No posters ;("):o.a.createElement("a",{href:t.posterUrl,rel:"noopener noreferrer",target:"_blank"},t.imgLoaded?"":o.a.createElement(Y,null),o.a.createElement("img",{src:t.posterUrl,className:"poster",alt:t.title+" poster",onLoad:function(){return e.props.revealImg(t.id)},hidden:!t.imgLoaded})):o.a.createElement(Y,null)))});return o.a.createElement("div",{className:"Table"},o.a.createElement("table",null,o.a.createElement("thead",null,o.a.createElement("tr",null,o.a.createElement("th",{className:"No",onClick:function(){return e.props.setSorting("No")}},"\u2116"),o.a.createElement("th",null,"Title"),o.a.createElement("th",null,"Overview"),o.a.createElement("th",null,"Year"),o.a.createElement("th",null,"Rating"),o.a.createElement("th",null,"Poster"))),o.a.createElement("tbody",null,n)))}}]),t}(o.a.Component),Z=Object(u.b)(function(e){return{shows:e.shows,info:e.info}},function(e){return Object(c.bindActionCreators)(a,e)})(z),$=function(e){var t=e.currPage,n=e.totalPages,a=t<=3?"":o.a.createElement("li",null,o.a.createElement("button",{className:"prev",onClick:function(){return e.setPage(1)}},"\xab")),r=t>=n-2?"":o.a.createElement("li",null,o.a.createElement("button",{className:"next",onClick:function(){return e.setPage(n)}},"\xbb")),s=function(a,r){return r<a||r>n?"":o.a.createElement("li",null,o.a.createElement("button",{className:t===r?"active":"",onClick:t!==r?function(){return e.setPage(r)}:null},r))};return t-2<1?o.a.createElement("ul",{className:"pagination"},a,s(1,1),s(2,2),s(3,3),s(4,4),s(5,5),r):t+2>n?o.a.createElement("ul",{className:"pagination"},a,s(1,n-4),s(2,n-3),s(3,n-2),s(4,n-1),s(5,n),r):o.a.createElement("ul",{className:"pagination"},a,s(1,t-2),s(2,t-1),s(3,t),s(4,t+1),s(5,t+2),r)},ee=function(){return o.a.createElement("div",{className:"loader"})},te=function(e){return o.a.createElement("h1",null,e.text.toUpperCase())},ne=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(K.a)(this,Object(q.a)(t).call(this,e))).handleInputChange=n.handleInputChange.bind(Object(J.a)(n)),n.handleKeyPressed=n.handleKeyPressed.bind(Object(J.a)(n)),n.handleModeChange=n.handleModeChange.bind(Object(J.a)(n)),n.handleSearch=n.handleSearch.bind(Object(J.a)(n)),n}return Object(X.a)(t,e),Object(Q.a)(t,[{key:"handleInputChange",value:function(){this.props.setSearchValue(this.search.value)}},{key:"handleKeyPressed",value:function(e){"Enter"===e.key&&this.handleSearch()}},{key:"handleModeChange",value:function(e){this.props.setSearchMode(e.target.value)}},{key:"handleSearch",value:function(){var e=this.props,t=e.shows,n=e.search,a=e.info;""!==n.value&&(this.props.setPage(1),this.props.searchShows(n.value,a.searchMode,t.pageNumber,t.itemsPerPage))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.shows,t.search,t.info);return o.a.createElement("div",null,o.a.createElement("p",null,o.a.createElement("input",{type:"search",placeholder:"Search...",ref:function(t){return e.search=t},onChange:this.handleInputChange,onKeyPress:this.handleKeyPressed}),o.a.createElement("span",null,o.a.createElement("select",{value:n.searchMode,onChange:this.handleModeChange},o.a.createElement("option",{value:"title"},"by title"),o.a.createElement("option",{value:"anyLangTitle"},"by title (any language)"),o.a.createElement("option",{value:"overview"},"by overview"))),o.a.createElement("button",{onClick:this.handleSearch},"Find")))}}]),t}(o.a.Component),ae=Object(u.b)(function(e){return{shows:e.shows,search:e.search,info:e.info}},function(e){return Object(c.bindActionCreators)(a,e)})(ne),re=function(e){function t(e){var n;return Object(B.a)(this,t),(n=Object(K.a)(this,Object(q.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(J.a)(n)),n}return Object(X.a)(t,e),Object(Q.a)(t,[{key:"handleChange",value:function(e){this.props.changeItemsPerPage(e.target.value)}},{key:"render",value:function(){var e=this,t=this.props,n=t.shows,a=t.info,r=t.search,s=n.pageCount&&n.itemCount,c=o.a.createElement("div",null,o.a.createElement("p",null,"TV-shows displayed:",o.a.createElement("select",{value:n.itemsPerPage,onChange:this.handleChange},o.a.createElement("option",{value:5},"5"),o.a.createElement("option",{value:10},"10"),o.a.createElement("option",{value:25},"25"),o.a.createElement("option",{value:50},"50")),". Page ",n.pageNumber," of ",n.pageCount),o.a.createElement("p",null,"Shows in total: ",n.itemCount)),u="search"!==a.mode?"":o.a.createElement("h2",null,"Search by ","anyLangTitle"===a.fetchedSearchMode?"title (any language)":a.fetchedSearchMode,' results for: "',r.previousValue,'".',o.a.createElement("button",{onClick:function(){return e.props.fetchShows(n.pageNumber,n.itemsPerPage)}},"Show all TV-shows"));if(n.infoNeedToBeChanged){switch(a.mode){case"popular":this.props.fetchShows(n.pageNumber,n.itemsPerPage);break;case"search":this.props.searchShows(r.value,a.searchMode,n.pageNumber,n.itemsPerPage)}return o.a.createElement("div",{className:"App"},o.a.createElement(ee,null))}return n.showsDownloaded?s?o.a.createElement("div",{className:"App"},o.a.createElement(ae,null),o.a.createElement(te,{text:"tv show posters"}),o.a.createElement($,{setPage:function(t){return e.props.setPage(t)},currPage:n.pageNumber,totalPages:n.pageCount}),u,o.a.createElement(Z,null),c):o.a.createElement("div",{className:"App"},o.a.createElement(ae,null),o.a.createElement(te,{text:"tv show posters"}),u,o.a.createElement(Z,null)):o.a.createElement("div",{className:"App"},o.a.createElement(ee,null))}}]),t}(o.a.Component),oe=Object(u.b)(function(e){return{shows:e.shows,search:e.search,info:e.info}},function(e){return Object(c.bindActionCreators)(a,e)})(re),se={shows:{info:[],pageCount:null,itemCount:null,pageNumber:1,itemsPerPage:10,infoNeedToBeChanged:!0,showsDownloaded:!1},search:{value:"",pending:!1,failed:!1},info:{mode:"popular",searchMode:"title"}},ce=n(21),ue=n(22),ie=Object(c.createStore)(D,se,Object(ce.composeWithDevTools)(Object(c.applyMiddleware)(ue.a)));Object(s.render)(o.a.createElement(u.a,{store:ie},o.a.createElement(oe,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.0544b312.chunk.js.map